# Лабораторная работа №4. Массивы и Функции

## Цель работы

Освоить работу с массивами в PHP, применяя различные операции: создание, добавление, удаление, сортировка и поиск. Закрепить навыки работы с функциями, включая передачу аргументов, возвращаемые значения и анонимные функции.

## Условие

### Задание 1. Работа с массивами

Разработать систему управления банковскими транзакциями с возможностью:

- добавления новых транзакций;
- удаления транзакций;
- сортировки транзакций по дате или сумме;
- поиска транзакций по описанию.

#### Задание 1.1. Подготовка среды

1. Убедитесь, что у вас установлен PHP 8+.
2. Создайте новый PHP-файл `index.php`.
3. В начале файла включите строгую типизацию:

   ```php
   <?php

   declare(strict_types=1);
   ```

#### Задание 1.2. Создание массива транзакций

Создайте массив `$transactions`, содержащий информацию о банковских транзакциях. Каждая транзакция представлена в виде ассоциативного массива с полями:

- `id` – уникальный идентификатор транзакции;
- `date` – дата совершения транзакции (YYYY-MM-DD);
- `amount` – сумма транзакции;
- `description` – описание назначения платежа;
- `merchant` – название организации, получившей платеж.

**Пример массива**:

```php
$transactions = [
    [
        "id" => 1,
        "date" => "2019-01-01",
        "amount" => 100.00,
        "description" => "Payment for groceries",
        "merchant" => "SuperMart",
    ],
    [
        "id" => 2,
        "date" => "2020-02-15",
        "amount" => 75.50,
        "description" => "Dinner with friends",
        "merchant" => "Local Restaurant",
    ],
];
```

_Примечание_: для работы с датами можно использовать класс `DateTime`.

#### Задание 1.3. Вывод списка транзакций

1. Используйте `foreach`, чтобы вывести список транзакций в HTML-таблице.

**Пример таблицы**:

```php
<table border='1'>
<thead>
    <tr>
        <!-- Заголовки столбцов -->
    </tr>
</thead>

<tbody>
<!-- Вывод транзакций -->
</tbody>

</table>
```

#### Задание 1.4. Реализация функций

Создайте и используйте следующие функции:

1. Создайте функцию `calculateTotalAmount(array $transactions): float`, которая вычисляет общую сумму всех транзакций.
    - Выведите сумму всех транзакций в конце таблицы.
2. Создайте функцию `findTransactionByDescription(string $descriptionPart)`, которая ищет транзакцию по части описания.
3. Создайте функцию `findTransactionById(int $id)`, которая ищет транзакцию по идентификатору.
    - Реализуйте данную функцию с помощью обычного цикла `foreach`.
    - Реализуйте данную функцию с помощью функции `array_filter` (на высшую оценку).
4. Создайте функцию `daysSinceTransaction(string $date): int`, которая возвращает количество дней между датой транзакции и текущим днем.
    - Добавьте в таблицу столбец с количеством дней с момента транзакции.
5. Создайте функцию `addTransaction(int $id, string $date, float $amount, string $description, string $merchant): void` для добавления новой транзакции.
    - Примите во внимание, что массив `$transactions` должен быть доступен внутри функции как глобальная переменная.

#### Задание 1.5. Сортировка транзакций

1. Отсортируйте транзакции по дате с использованием `usort()`.
2. Отсортируйте транзакции по сумме (по убыванию).

### Задание 2. Работа с файловой системой

1. Создайте директорию `"image"`, в которой сохраните не менее 20-30 изображений с расширением .jpg.
2. Затем создайте файл `index.php`, в котором определите веб-страницу с хедером, меню, контентом и футером.
3. Выведите изображения из директории `"image"` на веб-страницу в виде галереи.

   **Пример скрипта**:

   ```php
   <?php
   // Задаем путь к папке с изображениями
   $dir = 'image/';
   // Сканируем содержимое директории
   // scandir — Получает список файлов и каталогов, расположенных по  указанному пути.
   // Возвращает array, содержащий имена файлов и каталогов, расположенных по  пути, переданному в параметре
   $files = scandir($dir);

   // Если нет ошибок при сканировании
   if ($files === false) {
       return;
   }

   for ($i = 0; $i < count($files); $i++) {
       // Пропускаем текущий каталог и родительский
       if (($files[$i] != ".") && ($files[$i] != "..")) {
           // Получаем путь к изображению
           $path = $dir . $files[$i]; ?>
           <!-- Выведите картинку на экран ->
       <?php
       }
   }
   ```

**Приблизительный результат**:

<img src="https://imgur.com/CHaHDwp.png" width="500px" />

## Документация кода

Код должен быть корректно задокументирован, используя стандарт `PHPDoc`. Каждая функция и метод должны быть описаны с указанием их входных параметров, выходных данных и описанием функционала. Комментарии должны быть понятными, четкими и информативными, чтобы обеспечить понимание работы кода другим разработчикам.

## Контрольные вопросы

1. Что такое массивы в PHP?
2. Каким образом можно создать массив в PHP?
3. Для чего используется цикл `foreach`?